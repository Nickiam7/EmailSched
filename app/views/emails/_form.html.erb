<%= form_for(@email, html: { class: 'uk-form' }) do |f| %>
  <% if @email.errors.any? %>
    <div id="error_explanation">
      <h2>Please correct the <%= pluralize(@email.errors.count, "error") %> below to schedule your email.</h2>
      <ul>
        <% @email.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="uk-grid" data-uk-margin>

    <div class="uk-width-medium-1-2">   
      <div class="uk-panel uk-panel-header uk-panel-box uk-panel-box-secondary">
        <h3 class="uk-panel-title">General Info</h3>

              <div class="uk-width-1-1">
                <%= f.text_field :name, placeholder: "Enter a title", class: "uk-width-1-1 uk-margin-bottom" %>
              </div>
              <!--Nested Grid (Date/Prefix/Quantity) -->
              <div class="uk-grid">
                <div class="uk-width-1-3">
                  <%= f.text_field :starts_at, class: "uk-width-1-1", data: { uk_datepicker: "{weekstart:0}" }, placeholder: "Select a date" %>
                </div>
                <div class="uk-width-3-6 uk-text-center">
                  <span class="uk-text-small">Part of a Campaign?: </span>
                <%= f.label :campaign, class: "switch" do %>
                  <%= f.check_box :campaign, class: "switch-input", data: "checked", style: "width:75px;" %>       
                    <span class="switch-label" data-on="Yes" data-off="No"></span>
                    <span class="switch-handle"></span>
                <% end %>
                </div>
                <div class="uk-width-1-6 uk-text-right uk-text-small">
                  <%= f.text_field :number_of_emails, placeholder: "#", class: "uk-width-1-1" %>
                </div>
              </div>
            <!--END Nested Grid (Date/Prefix/Quantity) -->
              <div class="uk-grid">
                <div class="uk-width-1-3">
                  <%= f.text_field :target_audience, placeholder: "Target Audience" %>
                </div>
                <div class="uk-width-2-3 uk-text-right"> 
                  <div class="uk-button uk-button-small uk-form-select" data-uk-form-select>
                    <span></span>
                    <i class="uk-icon-sort uk-margin-left"></i>
                  <%= f.select(:pre, options_for_select([["Greater Than", ">"],["Less Than", "<"],["Equal To", "="]], selected: f.object.pre)) %>
                  </div>
                  <i class="uk-icon-long-arrow-right"></i>
                    <%= f.number_field :qty, placeholder: "Enter a Quantity", class: "uk-width-1-2" %>
                </div>
                <!--End 1/3-->
              </div>
              <!--End Grid-->
      </div>
      <!--End Panel-->
      <div class="uk-panel uk-panel-header uk-panel-box uk-panel-box-secondary">
        <h3 class="uk-panel-title">Project Info</h3>
        <%= f.text_area(:notes, placeholder: "Enter Any Email Notes", class: "uk-width-1-1", style: "min-height:100px;") %>
      </div>
      <!--End Project Info Panel-->
      <div class="uk-panel uk-panel-header uk-panel-box uk-panel-box-secondary">
        <div class="uk-width-1-1">
              <%= f.button class: "uk-button uk-button-primary uk-width-1-1", name: :commit, value: "Schedule Email" do %>
                Submit your email for review
              <% end %>
        </div>
      </div>
      <!--End Submit Panel-->
    </div>
    <!--End 1/2--> 

    
    <div class="uk-width-medium-1-3">
      <div class="uk-panel uk-panel-header uk-panel-box uk-panel-box-secondary">
        <h3 class="uk-panel-title"><i class="uk-icon-exclamation-triangle uk-text-warning"></i> Attention Please</h3>
          <p class="uk-text-bold">Things to keep in-mind <u>when planning to schedule emails</u>:</p>
          <ul class="uk-text-small">
              <li>Avoid scheduling emails on Thursdays.</li>
              <li>Avoid scheduling multiple 10,000+ recipient emails in one day.</li>
              <li>Schedul emails with enough time for editing and proper approval <i>(at least 1 week)</i>.</li>
          </ul>
          <hr>
          <p class="uk-text-bold">Things to keep in-mind <u>while scheduling emails</u>:</p>
          <ul class="uk-text-small">
              <li>Mandatory fields are marked, but the more information you provide the better.</li>
              <li>If you are schedule more than one email or it is part of a campaign. Please be descriptive in your title <i>(eg. Fellows Seminar 1a and 1b (2) )</i> </li>
              <li>Once you submit an email, you will not be able to edit any information yourself. You will have to submit an edit request to make changes.</li>
          </ul>
          <hr>
          <p class="uk-text-bold">Things to keep in-mind <u>After scheduling emails</u>:</p>
          <ul class="uk-text-small">
              <li>All emails, once submitted are in a state of <span class="uk-text-warning">Pending</span> so they will not show up on the calendar until they have been approved.</li>
              <li>To view the status of your emails you can login and go to your Dashboard. There you will see categories for <span class="uk-text-success">Scheduled Emails</span> and <span class="uk-text-warning">Pending Emails</span>.</li>
              <li>Once you submit an email, you will not be able to edit any information yourself. You will have to submit an edit request to make changes.</li>
          </ul>
          <p class="uk-text-bold uk-text-small">This is just a short list of things to think about during the email scheduling process. If you have any questions or need any help please contact <a href="mailto:nmcneany@ache.org">Nick McNeany</a> or <a href="mailto:mbaffes@ache.org">Mike Baffes</a>.</p>
      </div>
      <!--End Panel-->
    </div>
    <!--End 1/4-->

    <div class="uk-width-medium-1-6">
      <% if current_user.admin? %>
      <div class="uk-panel uk-panel-header uk-panel-box uk-panel-box-secondary">
        <h3 class="uk-panel-title">Email Status</h3>
          <div class="uk-width-medium-1-3">
            <%= f.label :email_pending, class: "switch" do %>
              <%= f.check_box :email_pending, class: "switch-input", data: "checked" %>       
                <span class="switch-label" data-off="Scheduled" data-on="Pending" ></span>
                <span class="switch-handle"></span>
            <% end %>
          </div>
      </div>
      <% else %>

      <% end %>
      <!--End Panel-->

      <div class="uk-panel uk-panel-header uk-panel-box uk-panel-box-secondary">
        <h3 class="uk-panel-title">Your Info</h3>
          <i class="uk-icon-user"></i> <%= @email.user.firstname %> <%= @email.user.lastname %> <br>
          <i class="uk-icon-home"></i> <%= @email.user.division %>
      </div>
      <!--End Panel-->

    </div>
    <!--End 1/6-->


</div>
<!--End Grid-->

<% end %>
<br><br>